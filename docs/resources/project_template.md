---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "semaphoreui_project_template Resource - semaphoreui"
subcategory: ""
description: |-
  The project template resource allows you to define a task template which tells SemaphoreUI how to run an application task.
---

# semaphoreui_project_template (Resource)

The project template resource allows you to define a task template which tells SemaphoreUI how to run an application task.

## Example Usage

```terraform
resource "semaphoreui_project" "project" {
  name = "Project"
}

resource "semaphoreui_project_key" "none" {
  project_id = semaphoreui_project.project.id
  name       = "None"
  none       = {}
}

resource "semaphoreui_project_repository" "repo" {
  project_id = semaphoreui_project.project.id
  name       = "Repo"
  url        = "git@github.com:example/test.git"
  branch     = "main"
  ssh_key_id = semaphoreui_project_key.none.id
}

resource "semaphoreui_project_inventory" "inventory" {
  project_id = semaphoreui_project.project.id
  name       = "Inventory"
  ssh_key_id = semaphoreui_project_key.none.id
  file = {
    path          = "path/to/inventory"
    repository_id = semaphoreui_project_repository.repo.id
  }
}

resource "semaphoreui_project_environment" "environment" {
  project_id = semaphoreui_project.project.id
  name       = "Environment"
  secrets = [{
    name  = "SECRET_ONE"
    type  = "var"
    value = "VALUE_ONE"
  }]
}

# Task Template
resource "semaphoreui_project_template" "task" {
  project_id     = semaphoreui_project.project.id
  environment_id = semaphoreui_project_environment.environment.id
  inventory_id   = semaphoreui_project_inventory.inventory.id
  repository_id  = semaphoreui_project_repository.repo.id
  name           = "Template"
  playbook       = "playbook.yml"
  description    = "Description"
  arguments = [
    "--help",
    "--vvv",
  ]
  allow_override_args_in_task = true

  survey_vars = [{
    name     = "age"
    title    = "What is your age?"
    required = true
    type     = "integer"
    }, {
    name  = "question"
    title = "Pick one."
    type  = "enum"
    enum_values = {
      "First Value"  = "1"
      "Second Value" = "2"
    }
  }]

  vaults = [{
    name = "" # default vault
    password = {
      vault_key_id = semaphoreui_project_key.none.id
    }
    }, {
    name = "database"
    script = {
      script = "path/to/script-client.py"
    }
  }]
}

# Build Template
resource "semaphoreui_project_template" "build" {
  project_id     = semaphoreui_project.project.id
  environment_id = semaphoreui_project_environment.environment.id
  inventory_id   = semaphoreui_project_inventory.inventory.id
  repository_id  = semaphoreui_project_repository.repo.id
  name           = "Build"
  playbook       = "build.yml"
  build = {
    start_version = "1.0.0"
  }
}

# Deploy Template
resource "semaphoreui_project_template" "deploy" {
  project_id     = semaphoreui_project.project.id
  environment_id = semaphoreui_project_environment.environment.id
  inventory_id   = semaphoreui_project_inventory.inventory.id
  repository_id  = semaphoreui_project_repository.repo.id
  name           = "Deploy"
  playbook       = "deploy.yml"
  deploy = {
    build_template_id = semaphoreui_project_template.build.id
    autorun           = false
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `environment_id` (Number) The environment (variable group) ID that the template uses.
- `inventory_id` (Number) The inventory ID that the template uses.
- `name` (String) The display name of the template.
- `playbook` (String) The playbook/script filename. Must be a relative path (path/to/inventory).
- `project_id` (Number) (ForceNew) The project ID that the template belongs to.
- `repository_id` (Number) The repository ID that the template uses.

### Optional

- `allow_override_args_in_task` (Boolean) Allow overriding arguments in the task. Value defaults to `false`.
- `app` (String) The application name. Must be a valid SemaphoreUI application name. Default applications include: `ansible`, `terraform`, `tofu`, `bash`, `powershell` and `python`. Value defaults to `ansible`.
- `arguments` (List of String) Commandline arguments passed to the application.
- `build` (Attributes) Specifies a build type template used to create artifacts. SemaphoreUI doesn't support artifacts out-of-box, it only provides task versioning. You should implement the artifact creation yourself. Ensure that if an attribute is set, these are not set: "[deploy]". (see [below for nested schema](#nestedatt--build))
- `deploy` (Attributes) Specifies a deploy type template used to deploy artifacts. Each `deploy` template is associated with a build template. Ensure that if an attribute is set, these are not set: "[build]". (see [below for nested schema](#nestedatt--deploy))
- `description` (String) The description of the template.
- `git_branch` (String) Override the git branch defined in the project repository.
- `suppress_success_alerts` (Boolean) Suppress success alerts. Value defaults to `false`.
- `survey_vars` (Attributes List) Survey variables. (see [below for nested schema](#nestedatt--survey_vars))
- `vaults` (Attributes List) Ansible Vault Passwords. (see [below for nested schema](#nestedatt--vaults))
- `view_id` (Number) The view ID that the templates belongs to.

### Read-Only

- `id` (Number) The template ID.

<a id="nestedatt--build"></a>
### Nested Schema for `build`

Optional:

- `start_version` (String) Defines start version of your artifact. Each run increments the artifact version.


<a id="nestedatt--deploy"></a>
### Nested Schema for `deploy`

Required:

- `build_template_id` (Number) The ID of the build template.

Optional:

- `autorun` (Boolean) Automatically run the deploy template after the build template. Value defaults to `false`.


<a id="nestedatt--survey_vars"></a>
### Nested Schema for `survey_vars`

Required:

- `name` (String) The name of the survey variable.
- `title` (String) The title of the survey variable.
- `type` (String) The type of the survey variable. Valid types are `string`, `integer`, `secret` and `enum`. When `enum` is used, the `enum_values` attribute must be defined. Value must satisfy at least one of the validations: value must be one of: ["string" "integer" "secret"] + Value must satisfy all of the validations: value must be one of: ["enum"] + Ensure that if an attribute is set, also these are set: "[<.enum_values]".

Optional:

- `description` (String) The description of the survey variable.
- `enum_values` (Map of String) The enum name/values. Map must contain at least 1 elements. Ensure that if an attribute is set, also these are set: "[<.type]".
- `required` (Boolean) Whether the survey variable is required. Value defaults to `false`.


<a id="nestedatt--vaults"></a>
### Nested Schema for `vaults`

Required:

- `name` (String) Ansible vault ID name. Must be unique.

Optional:

- `client_script` (Attributes) Unlock vault using an Ansible vault password client script. Ensure that if an attribute is set, these are not set: "[<.password]". (see [below for nested schema](#nestedatt--vaults--client_script))
- `password` (Attributes) Unlock vault using a password. Ensure that if an attribute is set, these are not set: "[<.client_script]". (see [below for nested schema](#nestedatt--vaults--password))

Read-Only:

- `id` (Number) The vault ID.

<a id="nestedatt--vaults--client_script"></a>
### Nested Schema for `vaults.client_script`

Required:

- `script` (String) The script path. Must end in `-client` with extension. See [Ansible Vault Password Client](https://docs.ansible.com/ansible/latest/vault_guide/vault_managing_passwords.html#storing-passwords-in-third-party-tools-with-vault-password-client-scripts).


<a id="nestedatt--vaults--password"></a>
### Nested Schema for `vaults.password`

Required:

- `vault_key_id` (Number) The project key ID to use.

## Import

Import is supported using the following syntax:

```shell
# Import ID is specified by the string "project/{project_id}/template/{template_id}".
# - {project_id} is the ID of the project in SemaphoreUI.
# - {template_id} is the ID of the template in SemaphoreUI.
terraform import semaphoreui_project_template.example project/1/template/2
```
Or using `import {}` block in the configuration file:
```hcl
import {
  to = semaphoreui_project_template.example
  id = "project/1/template/2"
}
```
